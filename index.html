<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Age Data Dashboard | Portfolio Project</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #F8FAFC;
            color: #1E293B;
            line-height: 1.5;
        }
        
        /* Layout */
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 1rem;
        }
        
        @media (min-width: 768px) {
            .container { padding: 2rem; }
        }
        
        .grid {
            display: grid;
            gap: 1.5rem;
        }
        
        @media (min-width: 1024px) {
            .grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
            .col-span-1 { grid-column: span 1; }
            .col-span-2 { grid-column: span 2; }
        }
        
        .grid-cols-2 {
            grid-template-columns: repeat(2, 1fr);
        }
        
        @media (min-width: 768px) {
            .grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
        }
        
        /* Cards */
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            border-radius: 1rem;
            padding: 1.5rem;
        }
        
        .stat-card {
            transition: all 0.3s ease;
            text-align: center;
            padding: 1rem;
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        /* Typography */
        .text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
        .text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
        .text-2xl { font-size: 1.5rem; line-height: 2rem; }
        .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
        .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
        .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
        .text-xs { font-size: 0.75rem; line-height: 1rem; }
        
        @media (min-width: 768px) {
            .text-5xl { font-size: 3rem; line-height: 1; }
        }
        
        .font-bold { font-weight: 700; }
        .font-semibold { font-weight: 600; }
        
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        
        /* Colors */
        .text-slate-800 { color: #1E293B; }
        .text-slate-700 { color: #334155; }
        .text-slate-600 { color: #475569; }
        .text-indigo-600 { color: #6366F1; }
        .text-emerald-600 { color: #10B981; }
        .text-purple-600 { color: #9333EA; }
        .text-pink-600 { color: #DB2777; }
        .text-white { color: #ffffff; }
        
        .bg-indigo-600 { background-color: #6366F1; }
        .bg-indigo-700 { background-color: #4F46E5; }
        
        /* Spacing */
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }
        .mt-1 { margin-top: 0.25rem; }
        
        .space-y-4 > * + * { margin-top: 1rem; }
        
        /* Flexbox */
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        
        /* Display */
        .hidden { display: none; }
        .block { display: block; }
        
        /* Forms */
        input[type="date"],
        input[type="number"] {
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            border: 1px solid #CBD5E1;
            outline: none;
            transition: all 0.2s;
            color-scheme: light;
        }
        
        input:focus {
            border-color: #6366F1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: #334155;
            margin-bottom: 0.5rem;
        }
        
        button {
            width: 100%;
            background-color: #6366F1;
            color: white;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        button:hover {
            background-color: #4F46E5;
        }
        
        /* Animations */
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Chart Container */
        .chart-container {
            position: relative;
            height: 300px;
        }
        
        /* Header */
        header {
            margin-bottom: 2rem;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1 class="text-4xl font-bold text-slate-800 mb-2">Age Data Dashboard</h1>
            <p class="text-slate-600">Visualize your life's journey with precision analytics</p>
        </header>

        <!-- Main Grid -->
        <div class="grid grid-cols-3">
            <!-- Input Section -->
            <div class="col-span-1">
                <div class="glass-card mb-6">
                    <h2 class="text-xl font-semibold mb-4 text-slate-800">Your Information</h2>
                    <div class="space-y-4">
                        <div>
                            <label>Date of Birth</label>
                            <input type="date" id="birthdate">
                        </div>
                        <div>
                            <label>Life Expectancy (years)</label>
                            <input type="number" id="lifeExpectancy" value="80" min="1" max="120">
                        </div>
                        <button id="calculateBtn">Calculate Age</button>
                    </div>
                </div>

                <!-- Age Display -->
                <div id="ageDisplay" class="glass-card hidden animate-fade-in">
                    <h3 class="text-lg font-semibold mb-3 text-slate-800">Your Age</h3>
                    <div class="text-4xl font-bold text-indigo-600 mb-2" id="ageText"></div>
                    <div class="text-sm text-slate-600" id="preciseAge"></div>
                </div>
            </div>

            <!-- Visualization Section -->
            <div class="col-span-2">
                <div id="dashboardContent" class="hidden animate-fade-in">
                    <!-- Charts Row -->
                    <div class="grid mb-6">
                        <div class="glass-card">
                            <h3 class="text-lg font-semibold mb-4 text-slate-800">Life Progress</h3>
                            <div class="chart-container">
                                <canvas id="lifeProgressChart"></canvas>
                            </div>
                        </div>
                        <div class="glass-card">
                            <h3 class="text-lg font-semibold mb-4 text-slate-800">Time Distribution</h3>
                            <div class="chart-container">
                                <canvas id="timeDistributionChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Stats Grid -->
                    <div class="grid grid-cols-4 mb-6">
                        <div class="stat-card glass-card">
                            <div class="text-2xl font-bold text-indigo-600" id="totalWeeks"></div>
                            <div class="text-xs text-slate-600 mt-1">Weeks Lived</div>
                        </div>
                        <div class="stat-card glass-card">
                            <div class="text-2xl font-bold text-emerald-600" id="totalDays"></div>
                            <div class="text-xs text-slate-600 mt-1">Days Lived</div>
                        </div>
                        <div class="stat-card glass-card">
                            <div class="text-2xl font-bold text-purple-600" id="totalHours"></div>
                            <div class="text-xs text-slate-600 mt-1">Hours Lived</div>
                        </div>
                        <div class="stat-card glass-card">
                            <div class="text-2xl font-bold text-pink-600" id="totalSeconds"></div>
                            <div class="text-xs text-slate-600 mt-1">Seconds Lived</div>
                        </div>
                    </div>

                    <!-- Milestone Tracker -->
                    <div class="glass-card">
                        <h3 class="text-lg font-semibold mb-4 text-slate-800">Next Milestone</h3>
                        <div class="flex items-center justify-between">
                            <div>
                                <div class="text-3xl font-bold text-indigo-600" id="nextMilestone"></div>
                                <div class="text-sm text-slate-600 mt-1" id="milestoneDate"></div>
                            </div>
                            <div class="text-right">
                                <div class="text-2xl font-semibold text-emerald-600" id="daysUntilMilestone"></div>
                                <div class="text-xs text-slate-600">days remaining</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==================== CALCULATOR ENGINE ====================
        // Handles all date calculations without external libraries
        const CalculatorEngine = {
            // Check if a year is a leap year
            isLeapYear(year) {
                return (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);
            },

            // Get days in a specific month
            getDaysInMonth(year, month) {
                const daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
                if (month === 1 && this.isLeapYear(year)) {
                    return 29;
                }
                return daysInMonth[month];
            },

            // Calculate precise age from birthdate to today
            calculateAge(birthDate) {
                const today = new Date();
                const birth = new Date(birthDate);
                
                let years = today.getFullYear() - birth.getFullYear();
                let months = today.getMonth() - birth.getMonth();
                let days = today.getDate() - birth.getDate();

                // Adjust for negative days
                if (days < 0) {
                    months--;
                    const prevMonth = today.getMonth() === 0 ? 11 : today.getMonth() - 1;
                    const prevYear = today.getMonth() === 0 ? today.getFullYear() - 1 : today.getFullYear();
                    days += this.getDaysInMonth(prevYear, prevMonth);
                }

                // Adjust for negative months
                if (months < 0) {
                    years--;
                    months += 12;
                }

                return { years, months, days };
            },

            // Calculate total days lived
            calculateTotalDays(birthDate) {
                const today = new Date();
                const birth = new Date(birthDate);
                const diffTime = Math.abs(today - birth);
                return Math.floor(diffTime / (1000 * 60 * 60 * 24));
            },

            // Calculate lifetime statistics
            calculateLifetimeStats(birthDate) {
                const totalDays = this.calculateTotalDays(birthDate);
                return {
                    weeks: Math.floor(totalDays / 7),
                    days: totalDays,
                    hours: totalDays * 24,
                    seconds: totalDays * 24 * 60 * 60
                };
            },

            // Find next "big zero" birthday (30, 40, 50, etc.)
            findNextMilestone(birthDate) {
                const birth = new Date(birthDate);
                const age = this.calculateAge(birthDate);
                const currentAge = age.years;
                
                // Find next decade milestone
                const nextMilestone = Math.ceil((currentAge + 1) / 10) * 10;
                
                const milestoneDate = new Date(birth);
                milestoneDate.setFullYear(birth.getFullYear() + nextMilestone);
                
                const today = new Date();
                const daysUntil = Math.ceil((milestoneDate - today) / (1000 * 60 * 60 * 24));
                
                return {
                    age: nextMilestone,
                    date: milestoneDate,
                    daysUntil: daysUntil
                };
            }
        };

        // ==================== CHART MANAGER ====================
        // Manages Chart.js initialization and updates
        const ChartManager = {
            lifeProgressChart: null,
            timeDistributionChart: null,

            // Initialize the life progress doughnut chart
            initLifeProgressChart(yearsLived, lifeExpectancy) {
                const ctx = document.getElementById('lifeProgressChart').getContext('2d');
                
                // Destroy existing chart if it exists
                if (this.lifeProgressChart) {
                    this.lifeProgressChart.destroy();
                }

                const yearsRemaining = Math.max(0, lifeExpectancy - yearsLived);
                const percentageLived = ((yearsLived / lifeExpectancy) * 100).toFixed(1);

                this.lifeProgressChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Years Lived', 'Years Remaining'],
                        datasets: [{
                            data: [yearsLived, yearsRemaining],
                            backgroundColor: ['#6366F1', '#E0E7FF'],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 15,
                                    font: { size: 12 }
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return context.label + ': ' + context.parsed + ' years';
                                    }
                                }
                            }
                        },
                        cutout: '70%'
                    },
                    plugins: [{
                        id: 'centerText',
                        beforeDraw: function(chart) {
                            const width = chart.width;
                            const height = chart.height;
                            const ctx = chart.ctx;
                            ctx.restore();
                            const fontSize = (height / 114).toFixed(2);
                            ctx.font = fontSize + "em sans-serif";
                            ctx.textBaseline = "middle";
                            const text = percentageLived + "%";
                            const textX = Math.round((width - ctx.measureText(text).width) / 2);
                            const textY = height / 2;
                            ctx.fillStyle = '#6366F1';
                            ctx.fillText(text, textX, textY);
                            ctx.save();
                        }
                    }]
                });
            },

            // Initialize the time distribution bar chart
            initTimeDistributionChart(stats, milestone) {
                const ctx = document.getElementById('timeDistributionChart').getContext('2d');
                
                // Destroy existing chart if it exists
                if (this.timeDistributionChart) {
                    this.timeDistributionChart.destroy();
                }

                this.timeDistributionChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Days Lived', 'Days to Milestone'],
                        datasets: [{
                            label: 'Days',
                            data: [stats.days, milestone.daysUntil],
                            backgroundColor: ['#10B981', '#6366F1'],
                            borderRadius: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return context.parsed.y.toLocaleString() + ' days';
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return value.toLocaleString();
                                    }
                                }
                            }
                        }
                    }
                });
            }
        };

        // ==================== UI MANAGER ====================
        // Handles all DOM updates and user interactions
        const UIManager = {
            init() {
                this.loadSavedBirthdate();
                this.attachEventListeners();
            },

            attachEventListeners() {
                document.getElementById('calculateBtn').addEventListener('click', () => {
                    this.handleCalculate();
                });

                // Allow Enter key to trigger calculation
                document.getElementById('birthdate').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.handleCalculate();
                });
            },

            loadSavedBirthdate() {
                const saved = localStorage.getItem('userBirthdate');
                if (saved) {
                    document.getElementById('birthdate').value = saved;
                }
            },

            handleCalculate() {
                const birthdate = document.getElementById('birthdate').value;
                const lifeExpectancy = parseInt(document.getElementById('lifeExpectancy').value);

                if (!birthdate) {
                    alert('Please enter your date of birth');
                    return;
                }

                // Save to localStorage
                localStorage.setItem('userBirthdate', birthdate);

                // Calculate all data
                const age = CalculatorEngine.calculateAge(birthdate);
                const stats = CalculatorEngine.calculateLifetimeStats(birthdate);
                const milestone = CalculatorEngine.findNextMilestone(birthdate);

                // Update UI
                this.updateAgeDisplay(age);
                this.updateStats(stats);
                this.updateMilestone(milestone);
                
                // Initialize charts
                ChartManager.initLifeProgressChart(age.years, lifeExpectancy);
                ChartManager.initTimeDistributionChart(stats, milestone);

                // Show dashboard
                document.getElementById('ageDisplay').classList.remove('hidden');
                document.getElementById('dashboardContent').classList.remove('hidden');
            },

            updateAgeDisplay(age) {
                document.getElementById('ageText').textContent = 
                    `${age.years} Years`;
                document.getElementById('preciseAge').textContent = 
                    `${age.years} years, ${age.months} months, ${age.days} days`;
            },

            updateStats(stats) {
                document.getElementById('totalWeeks').textContent = stats.weeks.toLocaleString();
                document.getElementById('totalDays').textContent = stats.days.toLocaleString();
                document.getElementById('totalHours').textContent = stats.hours.toLocaleString();
                document.getElementById('totalSeconds').textContent = stats.seconds.toLocaleString();
            },

            updateMilestone(milestone) {
                document.getElementById('nextMilestone').textContent = 
                    `Turning ${milestone.age}`;
                document.getElementById('milestoneDate').textContent = 
                    milestone.date.toLocaleDateString('en-US', { 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric' 
                    });
                document.getElementById('daysUntilMilestone').textContent = 
                    milestone.daysUntil.toLocaleString();
            }
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            UIManager.init();
        });
    </script>
</body>
</html>